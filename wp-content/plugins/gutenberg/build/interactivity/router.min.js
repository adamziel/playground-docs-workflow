import*as t from"@wordpress/interactivity";var e={d:(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},i={};e.d(i,{N:()=>S,S:()=>b});const a=(v={getConfig:()=>t.getConfig,privateApis:()=>t.privateApis,store:()=>t.store},f={},e.d(f,v),f),{directivePrefix:o,getRegionRootFragment:n,initialVdom:r,toVdom:s,render:c,parseInitialData:l,populateInitialData:d,batch:g}=(0,a.privateApis)("I acknowledge that using private APIs means my theme or plugin will inevitably break in the next version of WordPress."),w=new Map,u=t=>{const e=new URL(t,window.location);return e.pathname+e.search},h=(t,{vdom:e}={})=>{const i={},a=`data-${o}-router-region`;t.querySelectorAll(`[${a}]`).forEach((t=>{const o=t.getAttribute(a);i[o]=e?.has(t)?e.get(t):s(t)}));const n=t.querySelector("title")?.innerText,r=l(t);return{regions:i,title:n,initialData:r}},m=t=>{g((()=>{d(t.initialData);const e=`data-${o}-router-region`;document.querySelectorAll(`[${e}]`).forEach((i=>{const a=i.getAttribute(e),o=n(i);c(t.regions[a],o)})),t.title&&(document.title=t.title)}))},p=t=>(window.location.assign(t),new Promise((()=>{})));var v,f;window.addEventListener("popstate",(async()=>{const t=u(window.location),e=w.has(t)&&await w.get(t);e?(m(e),b.url=window.location.href):window.location.reload()})),w.set(u(window.location),Promise.resolve(h(document,{vdom:r})));let y="";const{state:b,actions:S}=(0,a.store)("core/router",{state:{url:window.location.href,navigation:{hasStarted:!1,hasFinished:!1,texts:{}}},actions:{*navigate(t,e={}){const{clientNavigationDisabled:i}=(0,a.getConfig)();i&&(yield p(t));const o=u(t),{navigation:n}=b,{loadingAnimation:r=!0,screenReaderAnnouncement:s=!0,timeout:c=1e4}=e;y=t,S.prefetch(o,e);const l=new Promise((t=>setTimeout(t,c))),d=setTimeout((()=>{y===t&&(r&&(n.hasStarted=!0,n.hasFinished=!1),s&&(n.message=n.texts.loading))}),400),g=yield Promise.race([w.get(o),l]);clearTimeout(d),y===t&&(g&&!g.initialData?.config?.["core/router"]?.clientNavigationDisabled?(m(g),window.history[e.replace?"replaceState":"pushState"]({},"",t),b.url=t,r&&(n.hasStarted=!1,n.hasFinished=!0),s&&(n.message=n.texts.loaded+(n.message===n.texts.loaded?"Â ":""))):yield p(t))},prefetch(t,e={}){const{clientNavigationDisabled:i}=(0,a.getConfig)();if(i)return;const o=u(t);!e.force&&w.has(o)||w.set(o,(async(t,{html:e})=>{try{if(!e){const i=await window.fetch(t);if(200!==i.status)return!1;e=await i.text()}const i=(new window.DOMParser).parseFromString(e,"text/html");return h(i)}catch(t){return!1}})(o,e))}}});var x=i.N,A=i.S;export{x as actions,A as state};
//# sourceMappingURL=router.min.js.map