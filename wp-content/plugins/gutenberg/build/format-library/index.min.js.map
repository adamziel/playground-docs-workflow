{"version":3,"file":"./build/format-library/index.min.js","mappings":"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","sources":["webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"richText\"]","webpack://wp/external window \"React\"","webpack://wp/external window [\"wp\",\"i18n\"]","webpack://wp/external window [\"wp\",\"blockEditor\"]","webpack://wp/external window [\"wp\",\"primitives\"]","../../packages/icons/src/library/format-bold.js","../../packages/format-library/src/bold/index.js","../../packages/icons/src/library/code.js","../../packages/format-library/src/code/index.js","webpack://wp/external window [\"wp\",\"components\"]","webpack://wp/external window [\"wp\",\"element\"]","../../packages/icons/src/library/keyboard-return.js","../../packages/format-library/src/image/index.js","../../packages/icons/src/library/format-italic.js","../../packages/format-library/src/italic/index.js","webpack://wp/external window [\"wp\",\"url\"]","webpack://wp/external window [\"wp\",\"htmlEntities\"]","../../packages/icons/src/library/link.js","webpack://wp/external window [\"wp\",\"a11y\"]","webpack://wp/external window [\"wp\",\"data\"]","../../packages/format-library/src/link/utils.js","../../packages/format-library/src/link/inline.js","../../packages/format-library/src/link/index.js","../../packages/icons/src/library/format-strikethrough.js","../../packages/format-library/src/strikethrough/index.js","../../packages/format-library/src/underline/index.js","../../packages/icons/src/icon/index.js","../../packages/icons/src/library/text-color.js","../../packages/icons/src/library/color.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/format-library/src/lock-unlock.js","../../packages/format-library/src/text-color/inline.js","../../packages/format-library/src/text-color/index.js","../../packages/icons/src/library/subscript.js","../../packages/format-library/src/subscript/index.js","../../packages/icons/src/library/superscript.js","../../packages/format-library/src/superscript/index.js","../../packages/icons/src/library/button.js","../../packages/format-library/src/keyboard/index.js","../../packages/icons/src/library/help.js","../../packages/format-library/src/unknown/index.js","../../packages/icons/src/library/language.js","../../packages/format-library/src/language/index.js","../../packages/format-library/src/non-breaking-space/index.js","../../packages/format-library/src/default-formats.js","../../packages/format-library/src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"richText\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatBold = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M14.7 11.3c1-.6 1.5-1.6 1.5-3 0-2.3-1.3-3.4-4-3.4H7v14h5.8c1.4 0 2.5-.3 3.3-1 .8-.7 1.2-1.7 1.2-2.9.1-1.9-.8-3.1-2.6-3.7zm-5.1-4h2.3c.6 0 1.1.1 1.4.4.3.3.5.7.5 1.2s-.2 1-.5 1.2c-.3.3-.8.4-1.4.4H9.6V7.3zm4.6 9c-.4.3-1 .4-1.7.4H9.6v-3.9h2.9c.7 0 1.3.2 1.7.5.4.3.6.8.6 1.5s-.2 1.2-.6 1.5z\" />\n\t</SVG>\n);\n\nexport default formatBold;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport {\n\tRichTextToolbarButton,\n\tRichTextShortcut,\n\t__unstableRichTextInputEvent,\n} from '@wordpress/block-editor';\nimport { formatBold } from '@wordpress/icons';\n\nconst name = 'core/bold';\nconst title = __( 'Bold' );\n\nexport const bold = {\n\tname,\n\ttitle,\n\ttagName: 'strong',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onToggle() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonChange( toggleFormat( value, { type: name } ) );\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tcharacter=\"b\"\n\t\t\t\t\tonUse={ onToggle }\n\t\t\t\t/>\n\t\t\t\t<RichTextToolbarButton\n\t\t\t\t\tname=\"bold\"\n\t\t\t\t\ticon={ formatBold }\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\tshortcutType=\"primary\"\n\t\t\t\t\tshortcutCharacter=\"b\"\n\t\t\t\t/>\n\t\t\t\t<__unstableRichTextInputEvent\n\t\t\t\t\tinputType=\"formatBold\"\n\t\t\t\t\tonInput={ onToggle }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst code = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z\" />\n\t</SVG>\n);\n\nexport default code;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat, remove, applyFormat } from '@wordpress/rich-text';\nimport {\n\tRichTextToolbarButton,\n\tRichTextShortcut,\n} from '@wordpress/block-editor';\nimport { code as codeIcon } from '@wordpress/icons';\n\nconst name = 'core/code';\nconst title = __( 'Inline code' );\n\nexport const code = {\n\tname,\n\ttitle,\n\ttagName: 'code',\n\tclassName: null,\n\t__unstableInputRule( value ) {\n\t\tconst BACKTICK = '`';\n\t\tconst { start, text } = value;\n\t\tconst characterBefore = text[ start - 1 ];\n\n\t\t// Quick check the text for the necessary character.\n\t\tif ( characterBefore !== BACKTICK ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( start - 2 < 0 ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tconst indexBefore = text.lastIndexOf( BACKTICK, start - 2 );\n\t\tif ( indexBefore === -1 ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tconst startIndex = indexBefore;\n\t\tconst endIndex = start - 2;\n\n\t\tif ( startIndex === endIndex ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tvalue = remove( value, startIndex, startIndex + 1 );\n\t\tvalue = remove( value, endIndex, endIndex + 1 );\n\t\tvalue = applyFormat( value, { type: name }, startIndex, endIndex );\n\n\t\treturn value;\n\t},\n\tedit( { value, onChange, onFocus, isActive } ) {\n\t\tfunction onClick() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"access\"\n\t\t\t\t\tcharacter=\"x\"\n\t\t\t\t\tonUse={ onClick }\n\t\t\t\t/>\n\t\t\t\t<RichTextToolbarButton\n\t\t\t\t\ticon={ codeIcon }\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst keyboardReturn = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"m6.734 16.106 2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.158 1.093-1.028-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734Z\" />\n\t</SVG>\n);\n\nexport default keyboardReturn;\n","/**\n * WordPress dependencies\n */\nimport {\n\tPath,\n\tSVG,\n\tPopover,\n\tButton,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { insertObject, useAnchor } from '@wordpress/rich-text';\nimport {\n\tMediaUpload,\n\tRichTextToolbarButton,\n\tMediaUploadCheck,\n} from '@wordpress/block-editor';\nimport { keyboardReturn } from '@wordpress/icons';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nconst name = 'core/image';\nconst title = __( 'Inline image' );\n\nexport const image = {\n\tname,\n\ttitle,\n\tkeywords: [ __( 'photo' ), __( 'media' ) ],\n\tobject: true,\n\ttagName: 'img',\n\tclassName: null,\n\tattributes: {\n\t\tclassName: 'class',\n\t\tstyle: 'style',\n\t\turl: 'src',\n\t\talt: 'alt',\n\t},\n\tedit: Edit,\n};\n\nfunction InlineUI( { value, onChange, activeObjectAttributes, contentRef } ) {\n\tconst { style } = activeObjectAttributes;\n\tconst [ width, setWidth ] = useState( style?.replace( /\\D/g, '' ) );\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: image,\n\t} );\n\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"bottom\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-format-toolbar__image-popover\"\n\t\t>\n\t\t\t<form\n\t\t\t\tclassName=\"block-editor-format-toolbar__image-container-content\"\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tconst newReplacements = value.replacements.slice();\n\n\t\t\t\t\tnewReplacements[ value.start ] = {\n\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...activeObjectAttributes,\n\t\t\t\t\t\t\tstyle: width ? `width: ${ width }px;` : '',\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tonChange( {\n\t\t\t\t\t\t...value,\n\t\t\t\t\t\treplacements: newReplacements,\n\t\t\t\t\t} );\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<HStack alignment=\"bottom\" spacing=\"0\">\n\t\t\t\t\t<NumberControl\n\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__image-container-value\"\n\t\t\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\t\t\tvalue={ width }\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tonChange={ ( newWidth ) => setWidth( newWidth ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__image-container-button\"\n\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t</form>\n\t\t</Popover>\n\t);\n}\n\nfunction Edit( {\n\tvalue,\n\tonChange,\n\tonFocus,\n\tisObjectActive,\n\tactiveObjectAttributes,\n\tcontentRef,\n} ) {\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\n\n\tfunction openModal() {\n\t\tsetIsModalOpen( true );\n\t}\n\n\tfunction closeModal() {\n\t\tsetIsModalOpen( false );\n\t}\n\n\treturn (\n\t\t<MediaUploadCheck>\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={\n\t\t\t\t\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<Path d=\"M4 18.5h16V17H4v1.5zM16 13v1.5h4V13h-4zM5.1 15h7.8c.6 0 1.1-.5 1.1-1.1V6.1c0-.6-.5-1.1-1.1-1.1H5.1C4.5 5 4 5.5 4 6.1v7.8c0 .6.5 1.1 1.1 1.1zm.4-8.5h7V10l-1-1c-.3-.3-.8-.3-1 0l-1.6 1.5-1.2-.7c-.3-.2-.6-.2-.9 0l-1.3 1V6.5zm0 6.1l1.8-1.3 1.3.8c.3.2.7.2.9-.1l1.5-1.4 1.5 1.4v1.5h-7v-.9z\" />\n\t\t\t\t\t</SVG>\n\t\t\t\t}\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ openModal }\n\t\t\t\tisActive={ isObjectActive }\n\t\t\t/>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<MediaUpload\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tonSelect={ ( { id, url, alt, width: imgWidth } ) => {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\tinsertObject( value, {\n\t\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tclassName: `wp-image-${ id }`,\n\t\t\t\t\t\t\t\t\tstyle: `width: ${ Math.min(\n\t\t\t\t\t\t\t\t\t\timgWidth,\n\t\t\t\t\t\t\t\t\t\t150\n\t\t\t\t\t\t\t\t\t) }px;`,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t} }\n\t\t\t\t\tonClose={ closeModal }\n\t\t\t\t\trender={ ( { open } ) => {\n\t\t\t\t\t\topen();\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isObjectActive && (\n\t\t\t\t<InlineUI\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tactiveObjectAttributes={ activeObjectAttributes }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</MediaUploadCheck>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatItalic = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12.5 5L10 19h1.9l2.5-14z\" />\n\t</SVG>\n);\n\nexport default formatItalic;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport {\n\tRichTextToolbarButton,\n\tRichTextShortcut,\n\t__unstableRichTextInputEvent,\n} from '@wordpress/block-editor';\nimport { formatItalic } from '@wordpress/icons';\n\nconst name = 'core/italic';\nconst title = __( 'Italic' );\n\nexport const italic = {\n\tname,\n\ttitle,\n\ttagName: 'em',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onToggle() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonChange( toggleFormat( value, { type: name } ) );\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tcharacter=\"i\"\n\t\t\t\t\tonUse={ onToggle }\n\t\t\t\t/>\n\t\t\t\t<RichTextToolbarButton\n\t\t\t\t\tname=\"italic\"\n\t\t\t\t\ticon={ formatItalic }\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\tshortcutType=\"primary\"\n\t\t\t\t\tshortcutCharacter=\"i\"\n\t\t\t\t/>\n\t\t\t\t<__unstableRichTextInputEvent\n\t\t\t\t\tinputType=\"formatItalic\"\n\t\t\t\t\tonInput={ onToggle }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst link = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z\" />\n\t</SVG>\n);\n\nexport default link;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"a11y\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\n * WordPress dependencies\n */\nimport {\n\tgetProtocol,\n\tisValidProtocol,\n\tgetAuthority,\n\tisValidAuthority,\n\tgetPath,\n\tisValidPath,\n\tgetQueryString,\n\tisValidQueryString,\n\tgetFragment,\n\tisValidFragment,\n} from '@wordpress/url';\n\n/**\n * Check for issues with the provided href.\n *\n * @param {string} href The href.\n *\n * @return {boolean} Is the href invalid?\n */\nexport function isValidHref( href ) {\n\tif ( ! href ) {\n\t\treturn false;\n\t}\n\n\tconst trimmedHref = href.trim();\n\n\tif ( ! trimmedHref ) {\n\t\treturn false;\n\t}\n\n\t// Does the href start with something that looks like a URL protocol?\n\tif ( /^\\S+:/.test( trimmedHref ) ) {\n\t\tconst protocol = getProtocol( trimmedHref );\n\t\tif ( ! isValidProtocol( protocol ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Add some extra checks for http(s) URIs, since these are the most common use-case.\n\t\t// This ensures URIs with an http protocol have exactly two forward slashes following the protocol.\n\t\tif (\n\t\t\tprotocol.startsWith( 'http' ) &&\n\t\t\t! /^https?:\\/\\/[^\\/\\s]/i.test( trimmedHref )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst authority = getAuthority( trimmedHref );\n\t\tif ( ! isValidAuthority( authority ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst path = getPath( trimmedHref );\n\t\tif ( path && ! isValidPath( path ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst queryString = getQueryString( trimmedHref );\n\t\tif ( queryString && ! isValidQueryString( queryString ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst fragment = getFragment( trimmedHref );\n\t\tif ( fragment && ! isValidFragment( fragment ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Validate anchor links.\n\tif ( trimmedHref.startsWith( '#' ) && ! isValidFragment( trimmedHref ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Generates the format object that will be applied to the link text.\n *\n * @param {Object}  options\n * @param {string}  options.url              The href of the link.\n * @param {string}  options.type             The type of the link.\n * @param {string}  options.id               The ID of the link.\n * @param {boolean} options.opensInNewWindow Whether this link will open in a new window.\n * @param {boolean} options.nofollow         Whether this link is marked as no follow relationship.\n * @return {Object} The final format object.\n */\nexport function createLinkFormat( {\n\turl,\n\ttype,\n\tid,\n\topensInNewWindow,\n\tnofollow,\n} ) {\n\tconst format = {\n\t\ttype: 'core/link',\n\t\tattributes: {\n\t\t\turl,\n\t\t},\n\t};\n\n\tif ( type ) format.attributes.type = type;\n\tif ( id ) format.attributes.id = id;\n\n\tif ( opensInNewWindow ) {\n\t\tformat.attributes.target = '_blank';\n\t\tformat.attributes.rel = format.attributes.rel\n\t\t\t? format.attributes.rel + ' noreferrer noopener'\n\t\t\t: 'noreferrer noopener';\n\t}\n\n\tif ( nofollow ) {\n\t\tformat.attributes.rel = format.attributes.rel\n\t\t\t? format.attributes.rel + ' nofollow'\n\t\t\t: 'nofollow';\n\t}\n\n\treturn format;\n}\n\n/* eslint-disable jsdoc/no-undefined-types */\n/**\n * Get the start and end boundaries of a given format from a rich text value.\n *\n *\n * @param {RichTextValue} value      the rich text value to interrogate.\n * @param {string}        format     the identifier for the target format (e.g. `core/link`, `core/bold`).\n * @param {number?}       startIndex optional startIndex to seek from.\n * @param {number?}       endIndex   optional endIndex to seek from.\n * @return {Object}\tobject containing start and end values for the given format.\n */\n/* eslint-enable jsdoc/no-undefined-types */\nexport function getFormatBoundary(\n\tvalue,\n\tformat,\n\tstartIndex = value.start,\n\tendIndex = value.end\n) {\n\tconst EMPTY_BOUNDARIES = {\n\t\tstart: null,\n\t\tend: null,\n\t};\n\n\tconst { formats } = value;\n\tlet targetFormat;\n\tlet initialIndex;\n\n\tif ( ! formats?.length ) {\n\t\treturn EMPTY_BOUNDARIES;\n\t}\n\n\t// Clone formats to avoid modifying source formats.\n\tconst newFormats = formats.slice();\n\n\tconst formatAtStart = newFormats[ startIndex ]?.find(\n\t\t( { type } ) => type === format.type\n\t);\n\n\tconst formatAtEnd = newFormats[ endIndex ]?.find(\n\t\t( { type } ) => type === format.type\n\t);\n\n\tconst formatAtEndMinusOne = newFormats[ endIndex - 1 ]?.find(\n\t\t( { type } ) => type === format.type\n\t);\n\n\tif ( !! formatAtStart ) {\n\t\t// Set values to conform to \"start\"\n\t\ttargetFormat = formatAtStart;\n\t\tinitialIndex = startIndex;\n\t} else if ( !! formatAtEnd ) {\n\t\t// Set values to conform to \"end\"\n\t\ttargetFormat = formatAtEnd;\n\t\tinitialIndex = endIndex;\n\t} else if ( !! formatAtEndMinusOne ) {\n\t\t// This is an edge case which will occur if you create a format, then place\n\t\t// the caret just before the format and hit the back ARROW key. The resulting\n\t\t// value object will have start and end +1 beyond the edge of the format boundary.\n\t\ttargetFormat = formatAtEndMinusOne;\n\t\tinitialIndex = endIndex - 1;\n\t} else {\n\t\treturn EMPTY_BOUNDARIES;\n\t}\n\n\tconst index = newFormats[ initialIndex ].indexOf( targetFormat );\n\n\tconst walkingArgs = [ newFormats, initialIndex, targetFormat, index ];\n\n\t// Walk the startIndex \"backwards\" to the leading \"edge\" of the matching format.\n\tstartIndex = walkToStart( ...walkingArgs );\n\n\t// Walk the endIndex \"forwards\" until the trailing \"edge\" of the matching format.\n\tendIndex = walkToEnd( ...walkingArgs );\n\n\t// Safe guard: start index cannot be less than 0.\n\tstartIndex = startIndex < 0 ? 0 : startIndex;\n\n\t// // Return the indicies of the \"edges\" as the boundaries.\n\treturn {\n\t\tstart: startIndex,\n\t\tend: endIndex,\n\t};\n}\n\n/**\n * Walks forwards/backwards towards the boundary of a given format within an\n * array of format objects. Returns the index of the boundary.\n *\n * @param {Array}  formats         the formats to search for the given format type.\n * @param {number} initialIndex    the starting index from which to walk.\n * @param {Object} targetFormatRef a reference to the format type object being sought.\n * @param {number} formatIndex     the index at which we expect the target format object to be.\n * @param {string} direction       either 'forwards' or 'backwards' to indicate the direction.\n * @return {number} the index of the boundary of the given format.\n */\nfunction walkToBoundary(\n\tformats,\n\tinitialIndex,\n\ttargetFormatRef,\n\tformatIndex,\n\tdirection\n) {\n\tlet index = initialIndex;\n\n\tconst directions = {\n\t\tforwards: 1,\n\t\tbackwards: -1,\n\t};\n\n\tconst directionIncrement = directions[ direction ] || 1; // invalid direction arg default to forwards\n\tconst inverseDirectionIncrement = directionIncrement * -1;\n\n\twhile (\n\t\tformats[ index ] &&\n\t\tformats[ index ][ formatIndex ] === targetFormatRef\n\t) {\n\t\t// Increment/decrement in the direction of operation.\n\t\tindex = index + directionIncrement;\n\t}\n\n\t// Restore by one in inverse direction of operation\n\t// to avoid out of bounds.\n\tindex = index + inverseDirectionIncrement;\n\n\treturn index;\n}\n\nconst partialRight =\n\t( fn, ...partialArgs ) =>\n\t( ...args ) =>\n\t\tfn( ...args, ...partialArgs );\n\nconst walkToStart = partialRight( walkToBoundary, 'backwards' );\n\nconst walkToEnd = partialRight( walkToBoundary, 'forwards' );\n","/**\n * WordPress dependencies\n */\nimport { useMemo, createInterpolateElement } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\nimport { Popover } from '@wordpress/components';\nimport { prependHTTP } from '@wordpress/url';\nimport {\n\tcreate,\n\tinsert,\n\tisCollapsed,\n\tapplyFormat,\n\tremoveFormat,\n\tslice,\n\treplace,\n\tsplit,\n\tconcat,\n\tuseAnchor,\n} from '@wordpress/rich-text';\nimport {\n\t__experimentalLinkControl as LinkControl,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { createLinkFormat, isValidHref, getFormatBoundary } from './utils';\nimport { link as settings } from './index';\n\nconst LINK_SETTINGS = [\n\t...LinkControl.DEFAULT_LINK_SETTINGS,\n\t{\n\t\tid: 'nofollow',\n\t\ttitle: __( 'Mark as nofollow' ),\n\t},\n];\n\nfunction InlineLinkUI( {\n\tisActive,\n\tactiveAttributes,\n\tvalue,\n\tonChange,\n\tonFocusOutside,\n\tstopAddingLink,\n\tcontentRef,\n\tfocusOnMount,\n} ) {\n\tconst richLinkTextValue = getRichTextValueFromSelection( value, isActive );\n\n\t// Get the text content minus any HTML tags.\n\tconst richTextText = richLinkTextValue.text;\n\n\tconst { selectionChange } = useDispatch( blockEditorStore );\n\n\tconst { createPageEntity, userCanCreatePages, selectionStart } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, getSelectionStart } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst _settings = getSettings();\n\n\t\t\treturn {\n\t\t\t\tcreatePageEntity: _settings.__experimentalCreatePageEntity,\n\t\t\t\tuserCanCreatePages: _settings.__experimentalUserCanCreatePages,\n\t\t\t\tselectionStart: getSelectionStart(),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tconst linkValue = useMemo(\n\t\t() => ( {\n\t\t\turl: activeAttributes.url,\n\t\t\ttype: activeAttributes.type,\n\t\t\tid: activeAttributes.id,\n\t\t\topensInNewTab: activeAttributes.target === '_blank',\n\t\t\tnofollow: activeAttributes.rel?.includes( 'nofollow' ),\n\t\t\ttitle: richTextText,\n\t\t} ),\n\t\t[\n\t\t\tactiveAttributes.id,\n\t\t\tactiveAttributes.rel,\n\t\t\tactiveAttributes.target,\n\t\t\tactiveAttributes.type,\n\t\t\tactiveAttributes.url,\n\t\t\trichTextText,\n\t\t]\n\t);\n\n\tfunction removeLink() {\n\t\tconst newValue = removeFormat( value, 'core/link' );\n\t\tonChange( newValue );\n\t\tstopAddingLink();\n\t\tspeak( __( 'Link removed.' ), 'assertive' );\n\t}\n\n\tfunction onChangeLink( nextValue ) {\n\t\tconst hasLink = linkValue?.url;\n\t\tconst isNewLink = ! hasLink;\n\n\t\t// Merge the next value with the current link value.\n\t\tnextValue = {\n\t\t\t...linkValue,\n\t\t\t...nextValue,\n\t\t};\n\n\t\tconst newUrl = prependHTTP( nextValue.url );\n\t\tconst linkFormat = createLinkFormat( {\n\t\t\turl: newUrl,\n\t\t\ttype: nextValue.type,\n\t\t\tid:\n\t\t\t\tnextValue.id !== undefined && nextValue.id !== null\n\t\t\t\t\t? String( nextValue.id )\n\t\t\t\t\t: undefined,\n\t\t\topensInNewWindow: nextValue.opensInNewTab,\n\t\t\tnofollow: nextValue.nofollow,\n\t\t} );\n\n\t\tconst newText = nextValue.title || newUrl;\n\n\t\t// Scenario: we have any active text selection or an active format.\n\t\tlet newValue;\n\t\tif ( isCollapsed( value ) && ! isActive ) {\n\t\t\t// Scenario: we don't have any actively selected text or formats.\n\t\t\tconst inserted = insert( value, newText );\n\n\t\t\tnewValue = applyFormat(\n\t\t\t\tinserted,\n\t\t\t\tlinkFormat,\n\t\t\t\tvalue.start,\n\t\t\t\tvalue.start + newText.length\n\t\t\t);\n\n\t\t\tonChange( newValue );\n\n\t\t\t// Close the Link UI.\n\t\t\tstopAddingLink();\n\n\t\t\t// Move the selection to the end of the inserted link outside of the format boundary\n\t\t\t// so the user can continue typing after the link.\n\t\t\tselectionChange( {\n\t\t\t\tclientId: selectionStart.clientId,\n\t\t\t\tidentifier: selectionStart.attributeKey,\n\t\t\t\tstart: value.start + newText.length + 1,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t} else if ( newText === richTextText ) {\n\t\t\tnewValue = applyFormat( value, linkFormat );\n\t\t} else {\n\t\t\t// Scenario: Editing an existing link.\n\n\t\t\t// Create new RichText value for the new text in order that we\n\t\t\t// can apply formats to it.\n\t\t\tnewValue = create( { text: newText } );\n\t\t\t// Apply the new Link format to this new text value.\n\t\t\tnewValue = applyFormat( newValue, linkFormat, 0, newText.length );\n\n\t\t\t// Get the boundaries of the active link format.\n\t\t\tconst boundary = getFormatBoundary( value, {\n\t\t\t\ttype: 'core/link',\n\t\t\t} );\n\n\t\t\t// Split the value at the start of the active link format.\n\t\t\t// Passing \"start\" as the 3rd parameter is required to ensure\n\t\t\t// the second half of the split value is split at the format's\n\t\t\t// start boundary and avoids relying on the value's \"end\" property\n\t\t\t// which may not correspond correctly.\n\t\t\tconst [ valBefore, valAfter ] = split(\n\t\t\t\tvalue,\n\t\t\t\tboundary.start,\n\t\t\t\tboundary.start\n\t\t\t);\n\n\t\t\t// Update the original (full) RichTextValue replacing the\n\t\t\t// target text with the *new* RichTextValue containing:\n\t\t\t// 1. The new text content.\n\t\t\t// 2. The new link format.\n\t\t\t// As \"replace\" will operate on the first match only, it is\n\t\t\t// run only against the second half of the value which was\n\t\t\t// split at the active format's boundary. This avoids a bug\n\t\t\t// with incorrectly targetted replacements.\n\t\t\t// See: https://github.com/WordPress/gutenberg/issues/41771.\n\t\t\t// Note original formats will be lost when applying this change.\n\t\t\t// That is expected behaviour.\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/33849#issuecomment-936134179.\n\t\t\tconst newValAfter = replace( valAfter, richTextText, newValue );\n\n\t\t\tnewValue = concat( valBefore, newValAfter );\n\t\t}\n\n\t\tonChange( newValue );\n\n\t\t// Focus should only be returned to the rich text on submit if this link is not\n\t\t// being created for the first time. If it is then focus should remain within the\n\t\t// Link UI because it should remain open for the user to modify the link they have\n\t\t// just created.\n\t\tif ( ! isNewLink ) {\n\t\t\tstopAddingLink();\n\t\t}\n\n\t\tif ( ! isValidHref( newUrl ) ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'Warning: the link has been inserted but may have errors. Please test it.'\n\t\t\t\t),\n\t\t\t\t'assertive'\n\t\t\t);\n\t\t} else if ( isActive ) {\n\t\t\tspeak( __( 'Link edited.' ), 'assertive' );\n\t\t} else {\n\t\t\tspeak( __( 'Link inserted.' ), 'assertive' );\n\t\t}\n\t}\n\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\tisActive,\n\t\t},\n\t} );\n\n\tasync function handleCreate( pageTitle ) {\n\t\tconst page = await createPageEntity( {\n\t\t\ttitle: pageTitle,\n\t\t\tstatus: 'draft',\n\t\t} );\n\n\t\treturn {\n\t\t\tid: page.id,\n\t\t\ttype: page.type,\n\t\t\ttitle: page.title.rendered,\n\t\t\turl: page.link,\n\t\t\tkind: 'post-type',\n\t\t};\n\t}\n\n\tfunction createButtonText( searchTerm ) {\n\t\treturn createInterpolateElement(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t__( 'Create page: <mark>%s</mark>' ),\n\t\t\t\tsearchTerm\n\t\t\t),\n\t\t\t{ mark: <mark /> }\n\t\t);\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tanchor={ popoverAnchor }\n\t\t\tonClose={ stopAddingLink }\n\t\t\tonFocusOutside={ onFocusOutside }\n\t\t\tplacement=\"bottom\"\n\t\t\toffset={ 10 }\n\t\t\tshift\n\t\t\tfocusOnMount={ focusOnMount }\n\t\t\tconstrainTabbing\n\t\t>\n\t\t\t<LinkControl\n\t\t\t\tvalue={ linkValue }\n\t\t\t\tonChange={ onChangeLink }\n\t\t\t\tonRemove={ removeLink }\n\t\t\t\thasRichPreviews\n\t\t\t\tcreateSuggestion={ createPageEntity && handleCreate }\n\t\t\t\twithCreateSuggestion={ userCanCreatePages }\n\t\t\t\tcreateSuggestionButtonText={ createButtonText }\n\t\t\t\thasTextControl\n\t\t\t\tsettings={ LINK_SETTINGS }\n\t\t\t\tshowInitialSuggestions\n\t\t\t\tsuggestionsQuery={ {\n\t\t\t\t\t// always show Pages as initial suggestions\n\t\t\t\t\tinitialSuggestionsSearchOptions: {\n\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\tsubtype: 'page',\n\t\t\t\t\t\tperPage: 20,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t/>\n\t\t</Popover>\n\t);\n}\n\nfunction getRichTextValueFromSelection( value, isActive ) {\n\t// Default to the selection ranges on the RichTextValue object.\n\tlet textStart = value.start;\n\tlet textEnd = value.end;\n\n\t// If the format is currently active then the rich text value\n\t// should always be taken from the bounds of the active format\n\t// and not the selected text.\n\tif ( isActive ) {\n\t\tconst boundary = getFormatBoundary( value, {\n\t\t\ttype: 'core/link',\n\t\t} );\n\n\t\ttextStart = boundary.start;\n\n\t\t// Text *selection* always extends +1 beyond the edge of the format.\n\t\t// We account for that here.\n\t\ttextEnd = boundary.end + 1;\n\t}\n\n\t// Get a RichTextValue containing the selected text content.\n\treturn slice( value, textStart, textEnd );\n}\n\nexport default InlineLinkUI;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useLayoutEffect, useEffect } from '@wordpress/element';\nimport {\n\tgetTextContent,\n\tapplyFormat,\n\tremoveFormat,\n\tslice,\n\tisCollapsed,\n\tinsert,\n\tcreate,\n} from '@wordpress/rich-text';\nimport { isURL, isEmail } from '@wordpress/url';\nimport {\n\tRichTextToolbarButton,\n\tRichTextShortcut,\n} from '@wordpress/block-editor';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { link as linkIcon } from '@wordpress/icons';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport InlineLinkUI from './inline';\nimport { isValidHref } from './utils';\n\nconst name = 'core/link';\nconst title = __( 'Link' );\n\nfunction Edit( {\n\tisActive,\n\tactiveAttributes,\n\tvalue,\n\tonChange,\n\tonFocus,\n\tcontentRef,\n} ) {\n\tconst [ editingLink, setEditingLink ] = useState( false );\n\tconst [ creatingLink, setCreatingLink ] = useState( false );\n\n\t// We only need to store the button element that opened the popover. We can ignore the other states, as they will be handled by the onFocus prop to return to the rich text field.\n\tconst [ openedBy, setOpenedBy ] = useState( null );\n\n\t// Manages whether the Link UI popover should autofocus when shown.\n\tconst [ shouldAutoFocus, setShouldAutoFocus ] = useState( true );\n\n\tfunction setIsEditingLink( isEditing, { autoFocus = true } = {} ) {\n\t\tsetEditingLink( isEditing );\n\t\tsetShouldAutoFocus( autoFocus );\n\t}\n\n\tfunction setIsCreatingLink( isCreating ) {\n\t\t// Don't add a new link if there is already an active link.\n\t\t// The two states are mutually exclusive.\n\t\tif ( isCreating === true && isActive ) {\n\t\t\treturn;\n\t\t}\n\t\tsetCreatingLink( isCreating );\n\t}\n\n\tuseEffect( () => {\n\t\t// When the link becomes inactive (i.e. isActive is false), reset the editingLink state\n\t\t// and the creatingLink state. This means that if the Link UI is displayed and the link\n\t\t// becomes inactive (e.g. used arrow keys to move cursor outside of link bounds), the UI will close.\n\t\tif ( ! isActive ) {\n\t\t\tsetEditingLink( false );\n\t\t\tsetCreatingLink( false );\n\t\t}\n\t}, [ isActive ] );\n\n\tuseLayoutEffect( () => {\n\t\tconst editableContentElement = contentRef.current;\n\t\tif ( ! editableContentElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction handleClick( event ) {\n\t\t\t// There is a situation whereby there is an existing link in the rich text\n\t\t\t// and the user clicks on the leftmost edge of that link and fails to activate\n\t\t\t// the link format, but the click event still fires on the `<a>` element.\n\t\t\t// This causes the `editingLink` state to be set to `true` and the link UI\n\t\t\t// to be rendered in \"creating\" mode. We need to check isActive to see if\n\t\t\t// we have an active link format.\n\t\t\tif (\n\t\t\t\t! event.target.closest( '[contenteditable] a' ) || // other formats (e.g. bold) may be nested within the link.\n\t\t\t\t! isActive\n\t\t\t) {\n\t\t\t\tsetIsEditingLink( false );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetIsEditingLink( true, { autoFocus: false } );\n\t\t}\n\n\t\teditableContentElement.addEventListener( 'click', handleClick );\n\n\t\treturn () => {\n\t\t\teditableContentElement.removeEventListener( 'click', handleClick );\n\t\t};\n\t}, [ contentRef, isActive ] );\n\n\tfunction addLink( target ) {\n\t\tsetShouldAutoFocus( true );\n\t\tconst text = getTextContent( slice( value ) );\n\n\t\tif ( ! isActive && text && isURL( text ) && isValidHref( text ) ) {\n\t\t\tonChange(\n\t\t\t\tapplyFormat( value, {\n\t\t\t\t\ttype: name,\n\t\t\t\t\tattributes: { url: text },\n\t\t\t\t} )\n\t\t\t);\n\t\t} else if ( ! isActive && text && isEmail( text ) ) {\n\t\t\tonChange(\n\t\t\t\tapplyFormat( value, {\n\t\t\t\t\ttype: name,\n\t\t\t\t\tattributes: { url: `mailto:${ text }` },\n\t\t\t\t} )\n\t\t\t);\n\t\t} else {\n\t\t\tif ( target ) {\n\t\t\t\tsetOpenedBy( target );\n\t\t\t}\n\t\t\tif ( ! isActive ) {\n\t\t\t\tsetIsCreatingLink( true );\n\t\t\t} else {\n\t\t\t\tsetIsEditingLink( true );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Runs when the popover is closed via escape keypress, unlinking the selected text,\n\t * but _not_ on a click outside the popover. onFocusOutside handles that.\n\t */\n\tfunction stopAddingLink() {\n\t\t// Don't let the click handler on the toolbar button trigger again.\n\n\t\t// There are two places for us to return focus to on Escape keypress:\n\t\t// 1. The rich text field.\n\t\t// 2. The toolbar button.\n\n\t\t// The toolbar button is the only one we need to handle returning focus to.\n\t\t// Otherwise, we rely on the passed in onFocus to return focus to the rich text field.\n\n\t\t// Close the popover\n\t\tsetIsEditingLink( false );\n\t\tsetIsCreatingLink( false );\n\n\t\t// Return focus to the toolbar button or the rich text field\n\t\tif ( openedBy?.tagName === 'BUTTON' ) {\n\t\t\topenedBy.focus();\n\t\t} else {\n\t\t\tonFocus();\n\t\t}\n\t\t// Remove the openedBy state\n\t\tsetOpenedBy( null );\n\t}\n\n\t// Test for this:\n\t// 1. Click on the link button\n\t// 2. Click the Options button in the top right of header\n\t// 3. Focus should be in the dropdown of the Options button\n\t// 4. Press Escape\n\t// 5. Focus should be on the Options button\n\tfunction onFocusOutside() {\n\t\tsetIsEditingLink( false );\n\t\tsetIsCreatingLink( false );\n\t\tsetOpenedBy( null );\n\t}\n\n\tfunction onRemoveFormat() {\n\t\tonChange( removeFormat( value, name ) );\n\t\tspeak( __( 'Link removed.' ), 'assertive' );\n\t}\n\n\tconst isEditingActiveLink = editingLink && isActive;\n\n\treturn (\n\t\t<>\n\t\t\t<RichTextShortcut type=\"primary\" character=\"k\" onUse={ addLink } />\n\t\t\t<RichTextShortcut\n\t\t\t\ttype=\"primaryShift\"\n\t\t\t\tcharacter=\"k\"\n\t\t\t\tonUse={ onRemoveFormat }\n\t\t\t/>\n\t\t\t<RichTextToolbarButton\n\t\t\t\tname=\"link\"\n\t\t\t\ticon={ linkIcon }\n\t\t\t\ttitle={ isActive ? __( 'Link' ) : title }\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\taddLink( event.currentTarget );\n\t\t\t\t} }\n\t\t\t\tisActive={ isActive || editingLink }\n\t\t\t\tshortcutType=\"primary\"\n\t\t\t\tshortcutCharacter=\"k\"\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\taria-expanded={ editingLink }\n\t\t\t/>\n\t\t\t{ ( isEditingActiveLink || creatingLink ) && (\n\t\t\t\t<InlineLinkUI\n\t\t\t\t\tstopAddingLink={ stopAddingLink }\n\t\t\t\t\tonFocusOutside={ onFocusOutside }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\tactiveAttributes={ activeAttributes }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\tfocusOnMount={ shouldAutoFocus ? 'firstElement' : false }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport const link = {\n\tname,\n\ttitle,\n\ttagName: 'a',\n\tclassName: null,\n\tattributes: {\n\t\turl: 'href',\n\t\ttype: 'data-type',\n\t\tid: 'data-id',\n\t\t_id: 'id',\n\t\ttarget: 'target',\n\t\trel: 'rel',\n\t},\n\t__unstablePasteRule( value, { html, plainText } ) {\n\t\tconst pastedText = ( html || plainText )\n\t\t\t.replace( /<[^>]+>/g, '' )\n\t\t\t.trim();\n\n\t\t// A URL was pasted, turn the selection into a link.\n\t\t// For the link pasting feature, allow only http(s) protocols.\n\t\tif ( ! isURL( pastedText ) || ! /^https?:/.test( pastedText ) ) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// Allows us to ask for this information when we get a report.\n\t\twindow.console.log( 'Created link:\\n\\n', pastedText );\n\n\t\tconst format = {\n\t\t\ttype: name,\n\t\t\tattributes: {\n\t\t\t\turl: decodeEntities( pastedText ),\n\t\t\t},\n\t\t};\n\n\t\tif ( isCollapsed( value ) ) {\n\t\t\treturn insert(\n\t\t\t\tvalue,\n\t\t\t\tapplyFormat(\n\t\t\t\t\tcreate( { text: plainText } ),\n\t\t\t\t\tformat,\n\t\t\t\t\t0,\n\t\t\t\t\tplainText.length\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn applyFormat( value, format );\n\t},\n\tedit: Edit,\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatStrikethrough = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z\" />\n\t</SVG>\n);\n\nexport default formatStrikethrough;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport {\n\tRichTextToolbarButton,\n\tRichTextShortcut,\n} from '@wordpress/block-editor';\nimport { formatStrikethrough } from '@wordpress/icons';\n\nconst name = 'core/strikethrough';\nconst title = __( 'Strikethrough' );\n\nexport const strikethrough = {\n\tname,\n\ttitle,\n\ttagName: 's',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onClick() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"access\"\n\t\t\t\t\tcharacter=\"d\"\n\t\t\t\t\tonUse={ onClick }\n\t\t\t\t/>\n\t\t\t\t<RichTextToolbarButton\n\t\t\t\t\ticon={ formatStrikethrough }\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport {\n\tRichTextShortcut,\n\t__unstableRichTextInputEvent,\n} from '@wordpress/block-editor';\n\nconst name = 'core/underline';\nconst title = __( 'Underline' );\n\nexport const underline = {\n\tname,\n\ttitle,\n\ttagName: 'span',\n\tclassName: null,\n\tattributes: {\n\t\tstyle: 'style',\n\t},\n\tedit( { value, onChange } ) {\n\t\tconst onToggle = () => {\n\t\t\tonChange(\n\t\t\t\ttoggleFormat( value, {\n\t\t\t\t\ttype: name,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tstyle: 'text-decoration: underline;',\n\t\t\t\t\t},\n\t\t\t\t\ttitle,\n\t\t\t\t} )\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<RichTextShortcut\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tcharacter=\"u\"\n\t\t\t\t\tonUse={ onToggle }\n\t\t\t\t/>\n\t\t\t\t<__unstableRichTextInputEvent\n\t\t\t\t\tinputType=\"formatUnderline\"\n\t\t\t\t\tonInput={ onToggle }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { cloneElement, forwardRef } from '@wordpress/element';\n\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps}                                 props icon is the SVG component to render\n *                                                          size is a number specifiying the icon size in pixels\n *                                                          Other props will be passed to wrapped SVG component\n * @param {import('react').ForwardedRef<HTMLElement>} ref   The forwarded ref to the SVG element.\n *\n * @return {JSX.Element}  Icon component\n */\nfunction Icon( { icon, size = 24, ...props }, ref ) {\n\treturn cloneElement( icon, {\n\t\twidth: size,\n\t\theight: size,\n\t\t...props,\n\t\tref,\n\t} );\n}\n\nexport default forwardRef( Icon );\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst textColor = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12.9 6h-2l-4 11h1.9l1.1-3h4.2l1.1 3h1.9L12.9 6zm-2.5 6.5l1.5-4.9 1.7 4.9h-3.2z\" />\n\t</SVG>\n);\n\nexport default textColor;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst color = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z\" />\n\t</SVG>\n);\n\nexport default color;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.',\n\t\t'@wordpress/format-library'\n\t);\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tapplyFormat,\n\tremoveFormat,\n\tgetActiveFormat,\n\tuseAnchor,\n} from '@wordpress/rich-text';\nimport {\n\tColorPalette,\n\tgetColorClassName,\n\tgetColorObjectByColorValue,\n\tgetColorObjectByAttributeValues,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tPopover,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { textColor as settings, transparentValue } from './index';\nimport { unlock } from '../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nconst TABS = [\n\t{ name: 'color', title: __( 'Text' ) },\n\t{ name: 'backgroundColor', title: __( 'Background' ) },\n];\n\nfunction parseCSS( css = '' ) {\n\treturn css.split( ';' ).reduce( ( accumulator, rule ) => {\n\t\tif ( rule ) {\n\t\t\tconst [ property, value ] = rule.split( ':' );\n\t\t\tif ( property === 'color' ) accumulator.color = value;\n\t\t\tif ( property === 'background-color' && value !== transparentValue )\n\t\t\t\taccumulator.backgroundColor = value;\n\t\t}\n\t\treturn accumulator;\n\t}, {} );\n}\n\nexport function parseClassName( className = '', colorSettings ) {\n\treturn className.split( ' ' ).reduce( ( accumulator, name ) => {\n\t\t// `colorSlug` could contain dashes, so simply match the start and end.\n\t\tif ( name.startsWith( 'has-' ) && name.endsWith( '-color' ) ) {\n\t\t\tconst colorSlug = name\n\t\t\t\t.replace( /^has-/, '' )\n\t\t\t\t.replace( /-color$/, '' );\n\t\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\t\tcolorSettings,\n\t\t\t\tcolorSlug\n\t\t\t);\n\t\t\taccumulator.color = colorObject.color;\n\t\t}\n\t\treturn accumulator;\n\t}, {} );\n}\n\nexport function getActiveColors( value, name, colorSettings ) {\n\tconst activeColorFormat = getActiveFormat( value, name );\n\n\tif ( ! activeColorFormat ) {\n\t\treturn {};\n\t}\n\n\treturn {\n\t\t...parseCSS( activeColorFormat.attributes.style ),\n\t\t...parseClassName( activeColorFormat.attributes.class, colorSettings ),\n\t};\n}\n\nfunction setColors( value, name, colorSettings, colors ) {\n\tconst { color, backgroundColor } = {\n\t\t...getActiveColors( value, name, colorSettings ),\n\t\t...colors,\n\t};\n\n\tif ( ! color && ! backgroundColor ) {\n\t\treturn removeFormat( value, name );\n\t}\n\n\tconst styles = [];\n\tconst classNames = [];\n\tconst attributes = {};\n\n\tif ( backgroundColor ) {\n\t\tstyles.push( [ 'background-color', backgroundColor ].join( ':' ) );\n\t} else {\n\t\t// Override default browser color for mark element.\n\t\tstyles.push( [ 'background-color', transparentValue ].join( ':' ) );\n\t}\n\n\tif ( color ) {\n\t\tconst colorObject = getColorObjectByColorValue( colorSettings, color );\n\n\t\tif ( colorObject ) {\n\t\t\tclassNames.push( getColorClassName( 'color', colorObject.slug ) );\n\t\t} else {\n\t\t\tstyles.push( [ 'color', color ].join( ':' ) );\n\t\t}\n\t}\n\n\tif ( styles.length ) attributes.style = styles.join( ';' );\n\tif ( classNames.length ) attributes.class = classNames.join( ' ' );\n\n\treturn applyFormat( value, { type: name, attributes } );\n}\n\nfunction ColorPicker( { name, property, value, onChange } ) {\n\tconst colors = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().colors ?? [];\n\t}, [] );\n\tconst onColorChange = useCallback(\n\t\t( color ) => {\n\t\t\tonChange(\n\t\t\t\tsetColors( value, name, colors, { [ property ]: color } )\n\t\t\t);\n\t\t},\n\t\t[ colors, onChange, property ]\n\t);\n\tconst activeColors = useMemo(\n\t\t() => getActiveColors( value, name, colors ),\n\t\t[ name, value, colors ]\n\t);\n\n\treturn (\n\t\t<ColorPalette\n\t\t\tvalue={ activeColors[ property ] }\n\t\t\tonChange={ onColorChange }\n\t\t/>\n\t);\n}\n\nexport default function InlineColorUI( {\n\tname,\n\tvalue,\n\tonChange,\n\tonClose,\n\tcontentRef,\n\tisActive,\n} ) {\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: { ...settings, isActive },\n\t} );\n\n\treturn (\n\t\t<Popover\n\t\t\tonClose={ onClose }\n\t\t\tclassName=\"format-library__inline-color-popover\"\n\t\t\tanchor={ popoverAnchor }\n\t\t>\n\t\t\t<Tabs>\n\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t{ TABS.map( ( tab ) => (\n\t\t\t\t\t\t<Tabs.Tab tabId={ tab.name } key={ tab.name }>\n\t\t\t\t\t\t\t{ tab.title }\n\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t) ) }\n\t\t\t\t</Tabs.TabList>\n\t\t\t\t{ TABS.map( ( tab ) => (\n\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\tkey={ tab.name }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\tname={ name }\n\t\t\t\t\t\t\tproperty={ tab.name }\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t) ) }\n\t\t\t</Tabs>\n\t\t</Popover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useCallback, useMemo, useState } from '@wordpress/element';\nimport { RichTextToolbarButton, useSettings } from '@wordpress/block-editor';\nimport {\n\tIcon,\n\tcolor as colorIcon,\n\ttextColor as textColorIcon,\n} from '@wordpress/icons';\nimport { removeFormat } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { default as InlineColorUI, getActiveColors } from './inline';\n\nexport const transparentValue = 'rgba(0, 0, 0, 0)';\n\nconst name = 'core/text-color';\nconst title = __( 'Highlight' );\n\nconst EMPTY_ARRAY = [];\n\nfunction getComputedStyleProperty( element, property ) {\n\tconst { ownerDocument } = element;\n\tconst { defaultView } = ownerDocument;\n\tconst style = defaultView.getComputedStyle( element );\n\tconst value = style.getPropertyValue( property );\n\n\tif (\n\t\tproperty === 'background-color' &&\n\t\tvalue === transparentValue &&\n\t\telement.parentElement\n\t) {\n\t\treturn getComputedStyleProperty( element.parentElement, property );\n\t}\n\n\treturn value;\n}\n\nfunction fillComputedColors( element, { color, backgroundColor } ) {\n\tif ( ! color && ! backgroundColor ) {\n\t\treturn;\n\t}\n\n\treturn {\n\t\tcolor: color || getComputedStyleProperty( element, 'color' ),\n\t\tbackgroundColor:\n\t\t\tbackgroundColor === transparentValue\n\t\t\t\t? getComputedStyleProperty( element, 'background-color' )\n\t\t\t\t: backgroundColor,\n\t};\n}\n\nfunction TextColorEdit( {\n\tvalue,\n\tonChange,\n\tisActive,\n\tactiveAttributes,\n\tcontentRef,\n} ) {\n\tconst [ allowCustomControl, colors = EMPTY_ARRAY ] = useSettings(\n\t\t'color.custom',\n\t\t'color.palette'\n\t);\n\tconst [ isAddingColor, setIsAddingColor ] = useState( false );\n\tconst enableIsAddingColor = useCallback(\n\t\t() => setIsAddingColor( true ),\n\t\t[ setIsAddingColor ]\n\t);\n\tconst disableIsAddingColor = useCallback(\n\t\t() => setIsAddingColor( false ),\n\t\t[ setIsAddingColor ]\n\t);\n\tconst colorIndicatorStyle = useMemo(\n\t\t() =>\n\t\t\tfillComputedColors(\n\t\t\t\tcontentRef.current,\n\t\t\t\tgetActiveColors( value, name, colors )\n\t\t\t),\n\t\t[ value, colors ]\n\t);\n\n\tconst hasColorsToChoose = colors.length || ! allowCustomControl;\n\tif ( ! hasColorsToChoose && ! isActive ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<RichTextToolbarButton\n\t\t\t\tclassName=\"format-library-text-color-button\"\n\t\t\t\tisActive={ isActive }\n\t\t\t\ticon={\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\tObject.keys( activeAttributes ).length\n\t\t\t\t\t\t\t\t? textColorIcon\n\t\t\t\t\t\t\t\t: colorIcon\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={ colorIndicatorStyle }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\ttitle={ title }\n\t\t\t\t// If has no colors to choose but a color is active remove the color onClick.\n\t\t\t\tonClick={\n\t\t\t\t\thasColorsToChoose\n\t\t\t\t\t\t? enableIsAddingColor\n\t\t\t\t\t\t: () => onChange( removeFormat( value, name ) )\n\t\t\t\t}\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t\t{ isAddingColor && (\n\t\t\t\t<InlineColorUI\n\t\t\t\t\tname={ name }\n\t\t\t\t\tonClose={ disableIsAddingColor }\n\t\t\t\t\tactiveAttributes={ activeAttributes }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\tisActive={ isActive }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport const textColor = {\n\tname,\n\ttitle,\n\ttagName: 'mark',\n\tclassName: 'has-inline-color',\n\tattributes: {\n\t\tstyle: 'style',\n\t\tclass: 'class',\n\t},\n\tedit: TextColorEdit,\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst subscript = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16.9 18.3l.8-1.2c.4-.6.7-1.2.9-1.6.2-.4.3-.8.3-1.2 0-.3-.1-.7-.2-1-.1-.3-.4-.5-.6-.7-.3-.2-.6-.3-1-.3s-.8.1-1.1.2c-.3.1-.7.3-1 .6l.2 1.3c.3-.3.5-.5.8-.6s.6-.2.9-.2c.3 0 .5.1.7.2.2.2.2.4.2.7 0 .3-.1.5-.2.8-.1.3-.4.7-.8 1.3L15 19.4h4.3v-1.2h-2.4zM14.1 7.2h-2L9.5 11 6.9 7.2h-2l3.6 5.3L4.7 18h2l2.7-4 2.7 4h2l-3.8-5.5 3.8-5.3z\" />\n\t</SVG>\n);\n\nexport default subscript;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport { subscript as subscriptIcon } from '@wordpress/icons';\n\nconst name = 'core/subscript';\nconst title = __( 'Subscript' );\n\nexport const subscript = {\n\tname,\n\ttitle,\n\ttagName: 'sub',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onToggle() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonToggle();\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ subscriptIcon }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst superscript = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16.9 10.3l.8-1.3c.4-.6.7-1.2.9-1.6.2-.4.3-.8.3-1.2 0-.3-.1-.7-.2-1-.2-.2-.4-.4-.7-.6-.3-.2-.6-.3-1-.3s-.8.1-1.1.2c-.3.1-.7.3-1 .6l.1 1.3c.3-.3.5-.5.8-.6s.6-.2.9-.2c.3 0 .5.1.7.2.2.2.2.4.2.7 0 .3-.1.5-.2.8-.1.3-.4.7-.8 1.3l-1.8 2.8h4.3v-1.2h-2.2zm-2.8-3.1h-2L9.5 11 6.9 7.2h-2l3.6 5.3L4.7 18h2l2.7-4 2.7 4h2l-3.8-5.5 3.8-5.3z\" />\n\t</SVG>\n);\n\nexport default superscript;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport { superscript as superscriptIcon } from '@wordpress/icons';\n\nconst name = 'core/superscript';\nconst title = __( 'Superscript' );\n\nexport const superscript = {\n\tname,\n\ttitle,\n\ttagName: 'sup',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onToggle() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonToggle();\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ superscriptIcon }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst button = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M8 12.5h8V11H8v1.5Z M19 6.5H5a2 2 0 0 0-2 2V15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a2 2 0 0 0-2-2ZM5 8h14a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8.5A.5.5 0 0 1 5 8Z\" />\n\t</SVG>\n);\n\nexport default button;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { toggleFormat } from '@wordpress/rich-text';\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport { button } from '@wordpress/icons';\n\nconst name = 'core/keyboard';\nconst title = __( 'Keyboard input' );\n\nexport const keyboard = {\n\tname,\n\ttitle,\n\ttagName: 'kbd',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tfunction onToggle() {\n\t\t\tonChange( toggleFormat( value, { type: name, title } ) );\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonToggle();\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ button }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst help = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z\" />\n\t</SVG>\n);\n\nexport default help;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { removeFormat, slice, isCollapsed } from '@wordpress/rich-text';\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport { help } from '@wordpress/icons';\n\nconst name = 'core/unknown';\nconst title = __( 'Clear Unknown Formatting' );\n\nfunction selectionContainsUnknownFormats( value ) {\n\tif ( isCollapsed( value ) ) {\n\t\treturn false;\n\t}\n\n\tconst selectedValue = slice( value );\n\treturn selectedValue.formats.some( ( formats ) => {\n\t\treturn formats.some( ( format ) => format.type === name );\n\t} );\n}\n\nexport const unknown = {\n\tname,\n\ttitle,\n\ttagName: '*',\n\tclassName: null,\n\tedit( { isActive, value, onChange, onFocus } ) {\n\t\tif ( ! isActive && ! selectionContainsUnknownFormats( value ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction onClick() {\n\t\t\tonChange( removeFormat( value, name ) );\n\t\t\tonFocus();\n\t\t}\n\n\t\treturn (\n\t\t\t<RichTextToolbarButton\n\t\t\t\tname=\"unknown\"\n\t\t\t\ticon={ help }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tisActive\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst language = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z\" />\n\t</SVG>\n);\n\nexport default language;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * WordPress dependencies\n */\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport {\n\tTextControl,\n\tSelectControl,\n\tButton,\n\tPopover,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { applyFormat, removeFormat, useAnchor } from '@wordpress/rich-text';\nimport { language as languageIcon } from '@wordpress/icons';\n\nconst name = 'core/language';\nconst title = __( 'Language' );\n\nexport const language = {\n\tname,\n\ttagName: 'bdo',\n\tclassName: null,\n\tedit: Edit,\n\ttitle,\n};\n\nfunction Edit( { isActive, value, onChange, contentRef } ) {\n\tconst [ isPopoverVisible, setIsPopoverVisible ] = useState( false );\n\tconst togglePopover = () => {\n\t\tsetIsPopoverVisible( ( state ) => ! state );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ languageIcon }\n\t\t\t\tlabel={ title }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tif ( isActive ) {\n\t\t\t\t\t\tonChange( removeFormat( value, name ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttogglePopover();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t\t{ isPopoverVisible && (\n\t\t\t\t<InlineLanguageUI\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tonClose={ togglePopover }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction InlineLanguageUI( { value, contentRef, onChange, onClose } ) {\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: language,\n\t} );\n\n\tconst [ lang, setLang ] = useState( '' );\n\tconst [ dir, setDir ] = useState( 'ltr' );\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"block-editor-format-toolbar__language-popover\"\n\t\t\tanchor={ popoverAnchor }\n\t\t\tonClose={ onClose }\n\t\t>\n\t\t\t<form\n\t\t\t\tclassName=\"block-editor-format-toolbar__language-container-content\"\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonChange(\n\t\t\t\t\t\tapplyFormat( value, {\n\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tlang,\n\t\t\t\t\t\t\t\tdir,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ title }\n\t\t\t\t\tvalue={ lang }\n\t\t\t\t\tonChange={ ( val ) => setLang( val ) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'A valid language attribute, like \"en\" or \"fr\".'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Text direction' ) }\n\t\t\t\t\tvalue={ dir }\n\t\t\t\t\toptions={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Left to right' ),\n\t\t\t\t\t\t\tvalue: 'ltr',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Right to left' ),\n\t\t\t\t\t\t\tvalue: 'rtl',\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t\tonChange={ ( val ) => setDir( val ) }\n\t\t\t\t/>\n\t\t\t\t<HStack alignment=\"right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\ttext={ __( 'Apply' ) }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t</form>\n\t\t</Popover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { insert } from '@wordpress/rich-text';\nimport { RichTextShortcut } from '@wordpress/block-editor';\n\nconst name = 'core/non-breaking-space';\nconst title = __( 'Non breaking space' );\n\nexport const nonBreakingSpace = {\n\tname,\n\ttitle,\n\ttagName: 'nbsp',\n\tclassName: null,\n\tedit( { value, onChange } ) {\n\t\tfunction addNonBreakingSpace() {\n\t\t\tonChange( insert( value, '\\u00a0' ) );\n\t\t}\n\n\t\treturn (\n\t\t\t<RichTextShortcut\n\t\t\t\ttype=\"primaryShift\"\n\t\t\t\tcharacter=\" \"\n\t\t\t\tonUse={ addNonBreakingSpace }\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * Internal dependencies\n */\nimport { bold } from './bold';\nimport { code } from './code';\nimport { image } from './image';\nimport { italic } from './italic';\nimport { link } from './link';\nimport { strikethrough } from './strikethrough';\nimport { underline } from './underline';\nimport { textColor } from './text-color';\nimport { subscript } from './subscript';\nimport { superscript } from './superscript';\nimport { keyboard } from './keyboard';\nimport { unknown } from './unknown';\nimport { language } from './language';\nimport { nonBreakingSpace } from './non-breaking-space';\n\nexport default [\n\tbold,\n\tcode,\n\timage,\n\titalic,\n\tlink,\n\tstrikethrough,\n\tunderline,\n\ttextColor,\n\tsubscript,\n\tsuperscript,\n\tkeyboard,\n\tunknown,\n\tlanguage,\n\tnonBreakingSpace,\n];\n","/**\n * WordPress dependencies\n */\nimport { registerFormatType } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport formats from './default-formats';\n\nformats.forEach( ( { name, ...settings } ) =>\n\tregisterFormatType( name, settings )\n);\n"],"names":["exports","Symbol","toStringTag","Object","defineProperty","value","window","createElement","SVG","xmlns","viewBox","Path","d","name","title","__","bold","tagName","className","edit","isActive","onChange","onFocus","onToggle","toggleFormat","type","Fragment","RichTextShortcut","character","onUse","RichTextToolbarButton","icon","formatBold","onClick","shortcutType","shortcutCharacter","__unstableRichTextInputEvent","inputType","onInput","code","__unstableInputRule","start","text","indexBefore","lastIndexOf","startIndex","endIndex","remove","applyFormat","codeIcon","role","ALLOWED_MEDIA_TYPES","image","keywords","object","attributes","style","url","alt","isObjectActive","activeObjectAttributes","contentRef","isModalOpen","setIsModalOpen","useState","closeModal","MediaUploadCheck","MediaUpload","allowedTypes","onSelect","id","width","imgWidth","insertObject","Math","min","onClose","render","open","InlineUI","setWidth","replace","popoverAnchor","useAnchor","editableContentElement","current","settings","Popover","placement","focusOnMount","anchor","onSubmit","event","newReplacements","replacements","slice","preventDefault","HStack","alignment","spacing","NumberControl","label","newWidth","Button","keyboardReturn","italic","formatItalic","isValidHref","href","trimmedHref","trim","test","protocol","getProtocol","isValidProtocol","startsWith","authority","getAuthority","isValidAuthority","path","getPath","isValidPath","queryString","getQueryString","isValidQueryString","fragment","getFragment","isValidFragment","getFormatBoundary","format","end","EMPTY_BOUNDARIES","formats","targetFormat","initialIndex","length","newFormats","formatAtStart","find","formatAtEnd","formatAtEndMinusOne","index","indexOf","walkingArgs","walkToStart","walkToEnd","walkToBoundary","targetFormatRef","formatIndex","direction","directionIncrement","forwards","backwards","inverseDirectionIncrement","partialRight","fn","partialArgs","args","LINK_SETTINGS","LinkControl","DEFAULT_LINK_SETTINGS","activeAttributes","onFocusOutside","stopAddingLink","richTextText","textStart","textEnd","boundary","getRichTextValueFromSelection","selectionChange","useDispatch","blockEditorStore","createPageEntity","userCanCreatePages","selectionStart","useSelect","select","getSettings","getSelectionStart","_settings","__experimentalCreatePageEntity","__experimentalUserCanCreatePages","linkValue","useMemo","opensInNewTab","target","nofollow","rel","includes","offset","shift","constrainTabbing","nextValue","hasLink","isNewLink","newUrl","prependHTTP","linkFormat","opensInNewWindow","createLinkFormat","undefined","String","newText","newValue","isCollapsed","inserted","insert","clientId","identifier","attributeKey","create","valBefore","valAfter","split","newValAfter","concat","speak","onRemove","removeFormat","hasRichPreviews","createSuggestion","async","pageTitle","page","status","rendered","link","kind","withCreateSuggestion","createSuggestionButtonText","searchTerm","createInterpolateElement","sprintf","mark","hasTextControl","showInitialSuggestions","suggestionsQuery","initialSuggestionsSearchOptions","subtype","perPage","_id","__unstablePasteRule","html","plainText","pastedText","isURL","console","log","decodeEntities","editingLink","setEditingLink","creatingLink","setCreatingLink","openedBy","setOpenedBy","shouldAutoFocus","setShouldAutoFocus","setIsEditingLink","isEditing","autoFocus","setIsCreatingLink","isCreating","addLink","getTextContent","isEmail","useEffect","useLayoutEffect","addEventListener","handleClick","removeEventListener","closest","isEditingActiveLink","linkIcon","currentTarget","InlineLinkUI","focus","strikethrough","formatStrikethrough","underline","forwardRef","size","props","ref","cloneElement","height","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","Tabs","componentsPrivateApis","TABS","parseCSS","css","reduce","accumulator","rule","property","color","transparentValue","backgroundColor","parseClassName","colorSettings","endsWith","colorSlug","colorObject","getColorObjectByAttributeValues","getActiveColors","activeColorFormat","getActiveFormat","class","ColorPicker","colors","_getSettings$colors","onColorChange","useCallback","styles","classNames","push","join","getColorObjectByColorValue","getColorClassName","slug","setColors","activeColors","ColorPalette","InlineColorUI","TabList","map","tab","Tab","tabId","key","TabPanel","focusable","EMPTY_ARRAY","getComputedStyleProperty","element","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parentElement","textColor","allowCustomControl","useSettings","isAddingColor","setIsAddingColor","enableIsAddingColor","disableIsAddingColor","colorIndicatorStyle","fillComputedColors","hasColorsToChoose","Icon","keys","textColorIcon","colorIcon","subscript","subscriptIcon","superscript","superscriptIcon","keyboard","button","unknown","some","selectionContainsUnknownFormats","help","language","isPopoverVisible","setIsPopoverVisible","togglePopover","state","languageIcon","InlineLanguageUI","lang","setLang","dir","setDir","TextControl","val","SelectControl","options","variant","forEach","registerFormatType"],"sourceRoot":""}